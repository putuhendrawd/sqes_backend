# -----------------------------------------------------------------
# Main Configuration for Seismic Quality Evaluation System (SQES)
# -----------------------------------------------------------------

[basic]
# Select the database type: 'mysql' or 'postgresql'
use_database = postgresql

# --- Data Source Settings ---

# 1. Waveform Source
# Select the source for waveform data:
# 'fdsn' = Download from the FDSN client specified in [client]
# 'sds'  = Load from a local SDS archive
waveform_source = fdsn

# Path to the root of your SDS archive (only used if waveform_source = sds)
# Example: /mnt/seiscomp/archive
archive_path = /path/to/your/sds/archive

# 2. Inventory Source
# Select the source for inventory data: 'fdsn' or 'local'
inventory_source = fdsn

# Path to local inventory files (only used if inventory_source = local)
# This should be a folder containing .xml or .dataless files
# Example: /opt/seiscomp/etc/inventory
inventory_path = /path/to/your/inventory/folder

# --- Output Paths ---
# These are the root directories where output files will be saved
outputpsd = /opt/sqes_output/psd_npz
outputpdf = /opt/sqes_output/pdf_plots
outputsignal = /opt/sqes_output/signal_plots
outputmseed = /opt/sqes_output/mseed_files

# --- Performance Settings ---
# Leave blank to use the default (approx. 1/3 of your CPUs)
# Or, set a specific number of processes, e.g., 16
cpu_number_used = 16

# Choice of spike algorithm:
# 'fast'      = Your NumPy method. Very fast, but high RAM usage.
# 'efficient' = Pandas method. Very slow, but low RAM usage.
spike_method = fast

# The URL to scrape for station sensor info.
# {station_code} will be replaced with the station name.
sensor_update_url = http://your.web.source/{station_code}
station_update_url = http://your.web.source/stations.json

# -----------------------------------------------------------------
# FDSN Client Credentials
# (Used if waveform_source or inventory_source is 'fdsn')
# -----------------------------------------------------------------
[client]
url = http://your-fdsn-server.com
user = your_username
password = your_password

# -----------------------------------------------------------------
# Database Credentials
# -----------------------------------------------------------------

[postgresql]
db_type = postgresql
host = 127.0.0.1
port = 5432
database = your_db_name
user = your_db_user
password = your_db_password
pool_size = 3

[mysql]
db_type = mysql
host = 127.0.0.1
port = 3306
database = your_db_name
user = your_db_user
password = your_db_password
pool_size = 3

# -----------------------------------------------------------------
# QC Analysis Thresholds
# (Optional - if not specified, defaults from QCThresholds will be used)
# -----------------------------------------------------------------
[qc_thresholds]

# --- Metric Limits (acceptable values) ---
rms_limit = 5000.0
ratioamp_limit = 1.01
gap_limit = 0.00274
overlap_limit = 0.0
spike_limit = 0.0

# --- Margins (degradation allowance before reaching 0 score) ---
rms_margin = 7500.0
ratioamp_margin = 2.02
gap_margin = 0.992
overlap_margin = 1.25
spike_margin = 25.0

# --- Warning Thresholds ---
# Percentage thresholds for PSD warnings
pct_below_warn = 20.0
pct_above_warn = 20.0

# Count thresholds for gap, overlap, and spike warnings
gap_count_warn = 5
overlap_count_warn = 5
spike_count_warn = 25

# Availability thresholds for quality classification
avail_good = 97.0
avail_fair = 60.0
avail_min_for_noise_check = 10.0

# --- Dead Channel Thresholds  ---
dcl_dead = 2.25
rms_damaged_max = 1.0

# --- Score Caps ---
# Maximum scores for different quality levels
fair_max_score = 89.0
poor_max_score = 59.0

# --- Weights (must sum to 1.0) ---
weight_noise = 0.35
weight_availability = 0.15
weight_rms = 0.10
weight_ratioamp = 0.10
weight_gaps = 0.10
weight_overlaps = 0.10
weight_spikes = 0.10